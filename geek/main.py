from file import extractFiles
from file import extractFiles


def filterFromFile():
    domainFileMap = extractFiles()
    group2domain = {}
    inf = open('data/featureCluster.txt',encoding='utf-8')
    reader = csv.reader(inf)
    _ = next(reader)
    for data in reader:
        group = data[1]
        domain = data[0]
        domain = domain2key(domain)
        if group not in group2domain:
            group2domain[group] = set()
        group2domain[group].add(domain)
    for group,domains in group2domain.items():
        domains = list(domains)
        checkData = []
        for checkDomain in domains:
            sameFile = []
            for cmpDomain in domains:
                sameNum = len(domainFileMap[checkDomain] & domainFileMap[cmpDomain])
                sameNum = min(sameNum,1)
                sameFile.append(sameNum)
            checkData.append(sameFile)
        if len(domains)>1:
            print(domains,checkData)



if __name__=='__main__':
    filterFromFile()